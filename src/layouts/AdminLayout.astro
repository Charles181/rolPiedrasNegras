---
import "../styles/global.css";
import Navbar from "../components/Common/Navbar.astro";

interface Props {
    title?: string;
}

const { title = "Admin Dashboard" } = Astro.props;
const { user } = Astro.locals;

// Get current path for active nav highlighting
const currentPath = Astro.url.pathname;
const isCampaigns = currentPath.includes("campaigns");

const navItems = [
    { href: "/admin", label: "Dashboard", icon: "ğŸ“Š" },
    { href: "/admin/users", label: "Usuarios", icon: "ğŸ‘¥" },
    { href: "/admin/campaigns", label: "CampaÃ±as", icon: "ğŸ¯" },
    { href: "/admin/events", label: "Eventos", icon: "ğŸ“…" },
    { href: "/admin/create", label: "Crear", icon: "ğŸ“" },
    { href: "/admin/posts", label: "Gestionar", icon: "ğŸ“‚" },
];
---

<!doctype html>
<html lang="es" class="h-full">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <title>{title} | Admin</title>
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");
            body {
                font-family: "Inter", sans-serif;
            }
        </style>
    </head>
    <body class="h-full bg-slate-900 text-slate-200 flex flex-col">
        <Navbar />
        <div class="flex flex-1 overflow-hidden">
            <!-- Sidebar -->
            <aside
                id="sidebar"
                class="w-64 bg-slate-800 border-r border-slate-700 flex-col hidden md:flex"
            >
                <div class="p-4 border-b border-slate-700">
                    <h1 class="font-bold text-white text-lg">RolPN Admin</h1>
                </div>

                <!-- Navigation -->
                <nav class="flex-1 overflow-y-auto p-4">
                    <ul class="space-y-1">
                        {
                            navItems.map((item) => {
                                const isActive =
                                    currentPath === item.href ||
                                    (item.href !== "/admin" &&
                                        currentPath.startsWith(item.href));
                                return (
                                    <li>
                                        <a
                                            href={item.href}
                                            class={`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 ${
                                                isActive
                                                    ? "bg-blue-600 text-white shadow-lg shadow-blue-500/20"
                                                    : "text-slate-300 hover:bg-slate-700 hover:text-white"
                                            }`}
                                        >
                                            <span class="text-lg">
                                                {item.icon}
                                            </span>
                                            <span class="font-medium">
                                                {item.label}
                                            </span>
                                        </a>
                                    </li>
                                );
                            })
                        }
                    </ul>
                </nav>
            </aside>

            <!-- Main Content Area -->
            <div class="flex-1 flex flex-col min-w-0 bg-slate-900">
                <!-- Mobile toggle for sidebar could go here if needed, but Navbar handles mobile menu effectively for global nav. 
                      For Admin sub-nav, we might rely on the desktop sidebar or add a secondary strip.
                      For simplicity, I'm hiding sidebar on mobile and assuming desktop usage for heavy admin tasks, or future mobile adaptation.
                 -->

                <main class="flex-1 overflow-y-auto p-6">
                    <slot />
                </main>
            </div>
        </div>
    </body>
</html>

<style is:global>
    @import url("https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@400;600;700&display=swap");

    :root {
        --font-serif: "Cinzel", serif;
        --font-sans: "Inter", sans-serif;
    }

    body {
        font-family: var(--font-sans);
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: var(--font-serif);
    }
</style>
